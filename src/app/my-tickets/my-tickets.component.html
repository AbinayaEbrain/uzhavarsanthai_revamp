<div id='focusDiv' tabindex="1"></div>
<body class="bg" style="overflow-x: hidden;">
  <div class="container card">
    <h5 class="styl mt-3">My Tickets</h5><br>
    <section id="tabs" style="margin-top: -20px;">
          <div class="container">
              <div class="row">
                <div class="col-xs-12 ">
                      <nav>
                          <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                              <a class="nav-item nav-link active" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Create Ticket</a>
                              <a class="nav-item nav-link" id="nav-home-tab" (click)="getAlltickets()" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">My Tickets <span *ngIf="ticketlngth" class="badge">{{ticketlngth}}</span><span *ngIf="!ticketlngth" class="badge">0</span></a>
                              <a class="nav-item nav-link" id="nav-home2-tab" (click)="getdisputes()" data-toggle="tab" href="#nav-home2" role="tab" aria-controls="nav-home2" aria-selected="true">My Disputes <span *ngIf="disputelength" class="badge">{{disputelength}}</span><span *ngIf="!disputelength" class="badge">{{disputelength1}}</span></a>
                          </div>
                      </nav>
                    </div>
                </div>
          </div>
      </section>
      <div class="tab-content py-3" id="nav-tabContent">
          <div class="tab-pane fade " id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
            <p style="float:left;cursor:pointer;font-weight: 600;margin-left: 2%;
    font-size: 13px;" id="paraTag1" (click)="changeColor1()" (click)="openTickets()">Open Tickets</p>  &nbsp;&nbsp;
            <p style="float:left;cursor:pointer;font-weight: 600;margin-left: 1%;font-size: 13px;" id="paraTag" (click)="changeColor()" (click)="closedTickets()">Resolved Tickets</p>
<br>
            <div class="container" style="margin-top: 1%;">
              <div >
              <div class="col-md-3 col-lg-4 col-12"></div>
              <div class="col-md-6 col-lg-4 col-12 errDesign" *ngIf="noTicketsMsg && !noOpenTicketsMsg && !noClosedTicketsMsg">
                  <!-- <img src="../../assets/Images/empty_cart_retina.png"  class="imgRes" alt="cart"> -->
                  <p class="mt-4" style="font-style: italic;">{{noTicketsMsg}}</p>
              </div>
              <div class="col-md-3 col-lg-4 col-12"></div>
      </div>
      <div >
        <div class="col-md-3 col-lg-4 col-12"></div>
        <div class="col-md-6 col-lg-4 col-12 errDesign" *ngIf="noOpenTicketsMsg ">
            <!-- <img src="../../assets/Images/empty_cart_retina.png"  class="imgRes" alt="cart"> -->
            <p class="mt-4" style="font-style: italic;">{{noOpenTicketsMsg}}</p>
        </div>
        <div class="col-md-3 col-lg-4 col-12"></div>
</div>
<div >
  <div class="col-md-3 col-lg-4 col-12"></div>
  <div class="col-md-6 col-lg-4 col-12 errDesign" *ngIf="noClosedTicketsMsg ">
      <!-- <img src="../../assets/Images/empty_cart_retina.png"  class="imgRes" alt="cart"> -->
      <p class="mt-4" style="font-style: italic;">{{noClosedTicketsMsg}}</p>
  </div>
  <div class="col-md-3 col-lg-4 col-12"></div>
</div>
              <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true" *ngFor="let ticket of userTickets | paginate: {id: 'foo', itemsPerPage:10,currentPage:p},let i = index">
              <div class="panel panel-default" style="box-shadow: 0px 2px 5px 0px #ccc;" >
                  <div class="panel-heading" role="tab" id="headingOne">
                      <h4 class="panel-title">
                          <a class="" role="button" data-toggle="collapse" data-parent="#accordion" href="#{{ticket._id}}" aria-expanded="true" aria-controls="collapseOne">
                              <div class="col-md-12">
                                <div class="row">
                                  <div class="col-md-3">
                                      <!-- [ngStyle]="{'background-color': ticket.ticketStatus === 'Created' ? 'rgba(13, 70, 8, 0.74)' : '#f44336e6' }" -->
                          <p style=" text-align: start;color: #0d4608;font-weight: bold;">{{ticket.ticketId}}</p>

                                  </div>
                                  <div class="col-md-6">
                                     <p class="ticketTit text-center" >{{ticket.ticketTitle}}</p>
                                  </div>
                                  <div class="col-md-3">
                                     <p class="ticketdate" style="font-weight: 500;" [ngStyle]="{'color': ticket.ticketStatus === 'Created' ? '#0d4608' : '#f44336e6' }">{{ticket.ticketStatus}}</p>
                                     <small style="float: right;color: #ef6806d9">{{ticket.createddate | date}}</small>
                                  </div>
                                </div>
                              </div>
                          </a>
                      </h4>
                  </div>
                  <div id="{{ticket._id}}" class="panel-collapse collapse in" style="margin-top: -2%;" role="tabpanel" aria-labelledby="headingOne">
                      <div class="panel-body">
                        <hr>
                        <p style="text-align: start;color: #0d4608;font-size: 15px;"><b>Description :</b> {{ticket.ticketDescription}}</p>
                        <p *ngIf="ticket.solution" style="text-align: start;color: #0d4608;font-size: 15px;"><b>Solution :</b> {{ticket.solution}}</p>
                      </div>
                  </div>
              </div>
          </div>
              <div class="mx-auto mt-3">
                   <pagination-controls id="foo"  style="margin-right: 30px;" maxSize="5" class="ngx-pagination" (pageChange)="p = $event"></pagination-controls>
                 </div>
            </div>
          </div>
          <div class="tab-pane fade show active" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
        <div class="container">
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-3"></div>
                <div class="col-md-6">
                  <form  #ticketForm="ngForm" *ngIf ="!submitted" novalidate>
                    <div class="row">
                        <div class="col-md-12">
                          <p *ngIf="successMsg" class="alert alert-success english_wrd1">
                              {{successMsg}}
                            </p>
                            <div class="form-group">
                                <label class=" english_wrd" for="firstname">Ticket Title</label>
                                <input type="text" placeholder="Enter ticket title" #ticketTitle="ngModel" [class.is-invalid]="ticketTitle.invalid && ticketTitle.touched" ngModel name="ticketTitle" class="form-control"
                                autocomplete="off" [(ngModel)]="ticketData.ticketTitle" required>
                                <span class="text-danger float-left error_word errFont" [class.d-none] = "ticketTitle.valid || ticketTitle.untouched"><i class="fa fa-info-circle" aria-hidden="true"></i> Ticket title is required</span>
                              </div>
                         </div>
                         <div class="col-md-12">
                            <div class="form-group  mb-5 mt-2">
                                  <label class="english_wrd" for="address">Ticket Description</label>
                                <textarea type="text" style="height:150px;" placeholder="Enter ticket description" #ticketDescription="ngModel"
                                [class.is-invalid]="ticketDescription.invalid && ticketDescription.touched" ngModel
                                name="ticketDescription" class="form-control"
                                 autocomplete="off"  [(ngModel)]="ticketData.ticketDescription" required></textarea>
                                <span class="text-danger float-left error_word errFont" [class.d-none] = "ticketDescription.valid || ticketDescription.untouched"><i class="fa fa-info-circle" aria-hidden="true"></i> Ticket description is required</span>
                              </div>
                         </div>
                         <div class="col-md-12 text-center">
                            <button class="btn btn-outline-success text-center viewMoreBtn  button_word"  type="submit" [disabled]="ticketForm.form.invalid" (click)="sendticket()">Submit</button>&nbsp;
                            <button type="reset" class="btn btn-outline-success text-center viewMoreBtn  button_word">Reset</button>
                         </div>
                    </div>
                    <br>
                  </form>
                </div>
              <div class="col-md-3"></div>
            </div>
          </div>
        </div>
          </div>
          <div class="tab-pane fade " id="nav-home2" role="tabpanel" aria-labelledby="nav-home2-tab">
            <div class="container">
                <div *ngIf="noDisputesMsg">
                  <div class="col-md-3 col-lg-4 col-12"></div>
                  <div class="col-md-6 col-lg-4 col-12 errDesign">
                      <img src="../../assets/Images/empty_cart_retina.png" class="imgRes" alt="cart">
                      <p class="mt-4" style="font-style: italic;">{{noDisputesMsg}}</p>
                  </div>
                  <div class="col-md-3 col-lg-4 col-12"></div>
          </div>
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true" *ngFor="let dispute of getExactDisputes | paginate: {id: 'foo1', itemsPerPage:10,currentPage:p},let i = index">
          <div class="panel panel-default" style="box-shadow: 0px 2px 5px 0px #ccc;" >
              <div class="panel-heading" role="tab" id="headingOne">
                  <h4 class="panel-title">
                      <a class="" role="button" data-toggle="collapse" data-parent="#accordion" href="#{{dispute._id}}" aria-expanded="true" aria-controls="collapseOne">
                          <div class="col-md-12">
                            <div class="row">
                              <div class="col-md-3">
                      <p style=" text-align: start;color: #0d4608;font-weight: bold;">ID -{{dispute.ticketId}}&nbsp;<span style="font-weight: bold;color:white;
border-radius: 0px 10px 0px 10px;padding: 1.2%;" [ngStyle]="{'background-color': dispute.disputeStatus === 'Created' ? 'rgba(13, 70, 8, 0.74)' : '#f44336e6' }"> {{dispute.disputeStatus}}</span></p>
                              </div>
                              <div class="col-md-6">
                                 <p class="ticketTit" >{{ dispute.dispute }}</p>
                              </div>
                              <div class="col-md-3">
                                 <p class="ticketdate" style="font-weight: 500;color: #ef6806d9;"><span>#{{dispute.sellerName}}</span> &nbsp; {{dispute.createdAt | date}}</p>
                              </div>
                            </div>
                          </div>
                      </a>
                  </h4>
              </div>
              <div id="{{dispute._id}}" class="panel-collapse collapse in" style="margin-top: -2%;" role="tabpanel" aria-labelledby="headingOne">
                  <div class="panel-body">
                    <hr>
                    <p style="text-align: start;color: #0d4608;font-size: 15px;"><b>Dispute : </b> {{dispute.dispute}} </p>
                    <p *ngIf="dispute.solution" style="text-align: start;color: #0d4608;font-size: 15px;"><b>Solution :</b> {{
                          dispute.solution
                        }}</p>
                  </div>
              </div>
          </div>
      </div>
              <div class="mx-auto mt-3">
                   <pagination-controls id="foo1"  style="margin-right: 30px;" maxSize="5" class="ngx-pagination" (pageChange)="p = $event"></pagination-controls>
                 </div>
            </div>
          </div>
      </div>
    </div>
